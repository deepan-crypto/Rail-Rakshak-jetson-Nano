â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                 ğŸš€ JETSON â†’ BACKEND â†’ DASHBOARD FLOW ğŸš€                   â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ YOUR JETSON ORIN NANO (Running c.py with YOLOv5)                          â”‚
â”‚                                                                             â”‚
â”‚  USB/CSI Camera                                                            â”‚
â”‚    â†“                                                                        â”‚
â”‚  c.py reads frame                                                          â”‚
â”‚    â†“                                                                        â”‚
â”‚  YOLOv5 model(frame)  â† This stays the same, no changes!                 â”‚
â”‚    â†“                                                                        â”‚
â”‚  results = [class, bbox, confidence, ...]                                 â”‚
â”‚    â†“                                                                        â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ [NEW] Your code adds:                                               â”‚   â”‚
â”‚ â”‚   uploader.send(frame, results)                                     â”‚   â”‚
â”‚ â”‚                â†“                                                     â”‚   â”‚
â”‚ â”‚   Extracts: class, bbox, confidence                                â”‚   â”‚
â”‚ â”‚   Encodes:  frame â†’ Base64 JPEG                                    â”‚   â”‚
â”‚ â”‚   Creates:  JSON payload                                           â”‚   â”‚
â”‚ â”‚   Sends:    HTTP POST                                              â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â†“ HTTP POST
                    http://YOUR.IP:5000/api/telemetry
                                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ BACKEND SERVER (Node.js Express + Socket.io)                              â”‚
â”‚                                                                             â”‚
â”‚  POST /api/telemetry endpoint receives:                                   â”‚
â”‚  {                                                                          â”‚
â”‚    "timestamp": "2026-02-17 14:05:00",                                   â”‚
â”‚    "gps_location": {"lat": 28.6139, "lon": 77.2090},                     â”‚
â”‚    "hazards": [                                                            â”‚
â”‚      {                                                                     â”‚
â”‚        "class": 0,                                                         â”‚
â”‚        "name": "Pothole",                                                 â”‚
â”‚        "confidence": 0.92,                                                â”‚
â”‚        "xmin": 120, "ymin": 40, "xmax": 200, "ymax": 150                â”‚
â”‚      }                                                                     â”‚
â”‚    ],                                                                      â”‚
â”‚    "image_stream": "data:image/jpeg;base64,/9j/4AAQSkZJRg..."           â”‚
â”‚  }                                                                         â”‚
â”‚                                                                             â”‚
â”‚  Server:                                                                   â”‚
â”‚    1. âœ… Validates payload                                                â”‚
â”‚    2. ğŸ’¾ Saves to MongoDB (auto-deletes after 1 hour)                    â”‚
â”‚    3. ğŸ“¡ Broadcasts via WebSocket â†’ all connected clients                â”‚
â”‚       (Event: 'telemetry-update')                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“ WebSocket Broadcast
                    io.emit('telemetry-update', data)
                                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ REACT FRONTEND DASHBOARD (http://localhost:5173)                          â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   LIVE VIDEO FEED       â”‚  â”‚  DETECTION LOG                       â”‚   â”‚
â”‚  â”‚   (Base64 JPEG)         â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚  â”‚  â”‚ Time: 14:05:00               â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ [Camera Frame Here] â”‚â”‚  â”‚  â”‚ Lat: 28.6139, Lon: 77.2090  â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ [jpg image]         â”‚â”‚  â”‚  â”‚ Hazard: Pothole             â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ [Rendered instantly]â”‚â”‚  â”‚  â”‚ Confidence: 92%              â”‚   â”‚   â”‚
â”‚  â”‚  â”‚                     â”‚â”‚  â”‚  â”‚                              â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ â­ POTHOLE DETECTED  â”‚â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚   â”‚
â”‚  â”‚  â”‚ Confidence: 92%      â”‚â”‚  â”‚  â”‚ Time: 14:04:58               â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ Location: Marked     â”‚â”‚  â”‚  â”‚ Lat: 28.6138, Lon: 77.2089  â”‚   â”‚   â”‚
â”‚  â”‚  â”‚                      â”‚â”‚  â”‚  â”‚ Hazard: Crack               â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚  â”‚  â”‚ Confidence: 87%              â”‚   â”‚   â”‚
â”‚  â”‚                         â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚  Status: ğŸŸ¢ CONNECTED   â”‚  â”‚                                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  [Scrolls as new detections come]   â”‚   â”‚
â”‚                               â”‚  [Keeps last 50 entries]             â”‚   â”‚
â”‚                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  All updates happen in real-time:                                         â”‚
â”‚  Video Stream: < 100ms latency                                            â”‚
â”‚  Detection Log: < 50ms latency                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

HOW TO INTEGRATE IN 4 SIMPLE STEPS:

Step 1ï¸âƒ£  COPY MODULE TO JETSON
â”œâ”€ File: backend/rail_rakshak_uploader.py
â””â”€ Destination: Your Jetson project folder

Step 2ï¸âƒ£  MODIFY c.py (3 LINES)
â”œâ”€ Add import: from rail_rakshak_uploader import TelemetryUploader
â”œâ”€ Initialize: uploader = TelemetryUploader(
â”‚                   backend_url="http://192.168.1.100:5000/api/telemetry"
â”‚               )
â””â”€ In loop: uploader.send(frame, results)

Step 3ï¸âƒ£  UPDATE IP ADDRESS
â””â”€ Change 192.168.1.100 to your backend machine IP
   â””â”€ Find it: hostname -I (on backend machine)

Step 4ï¸âƒ£  RUN!
â””â”€ python c.py (on Jetson)
â””â”€ Backend + Dashboard already running on laptop

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

YOUR EXISTING CODE - WHAT STAYS THE SAME:

    âœ… cap = cv2.VideoCapture(0)          â† No change
    âœ… results = model(frame)              â† No change
    âœ… model = torch.hub.load(...)         â† No change
    âœ… cv2.imshow(...)                     â† No change
    âœ… Your YOLOv5 .pt file               â† No change
    âœ… Your inference logic                â† No change
    
ONLY ADD:
    ğŸ†• uploader.send(frame, results)      â† One line!

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

WHAT THE MODULE DOES AUTOMATICALLY:

    âœ… Extracts class, bbox, confidence from results
    âœ… Converts bbox to xmin, ymin, xmax, ymax
    âœ… Encodes frame as Base64 JPEG (configurable quality)
    âœ… Creates JSON payload with timestamp & GPS
    âœ… Sends to backend via HTTP POST (with timeout & error handling)
    âœ… Supports async mode (non-blocking)
    âœ… Tracks statistics (frames sent, errors, success rate)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

CONFIGURATION REFERENCE:

    TelemetryUploader(
        backend_url="http://192.168.1.100:5000/api/telemetry",  # â† Your IP
        gps_lat=28.6139,           # Your latitude
        gps_lon=77.2090,           # Your longitude
        send_interval=2,           # Send every 2 frames (lower = more frequent)
        jpeg_quality=80,           # 0-100 (lower = smaller file, faster)
        async_mode=False,          # Set True for non-blocking / recommended
        buffer_size=10             # Queue size for async mode
    )

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

VERIFY IT'S WORKING:

    Jetson Console Output:
    â”œâ”€ âœ… Backend reachable: http://192.168.1.100:5000/api/telemetry
    â”œâ”€ [0.5s] âœ… 2 hazards â†’ dashboard
    â”œâ”€ [1.2s] âœ… 1 hazards â†’ dashboard
    â””â”€ [2.1s] âœ… 0 hazards â†’ dashboard

    Backend Console Output:
    â”œâ”€ ğŸ“¹ [TELEMETRY RECEIVED] Time: 2026-02-17 14:05:00 | Hazards: 2
    â”œâ”€ âš ï¸  Pothole (Confidence: 92.00%)
    â””â”€ âš ï¸  Crack (Confidence: 87.50%)

    Dashboard (http://localhost:5173):
    â”œâ”€ Live video feed shows Jetson camera view
    â”œâ”€ Right sidebar shows detection log updating
    â”œâ”€ GPS coordinates displayed
    â””â”€ Connection status shows ğŸŸ¢ CONNECTED

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

LATENCY BREAKDOWN:

    Jetson: Capture + Inference + Encoding:      ~50ms  (YOLOv5 on Jetson)
    Network: HTTP POST to Backend:               ~10ms  (local LAN)
    Backend: Validate + Save + Broadcast:        ~20ms  (Socket.io)
    Frontend: WebSocket receive + render:        ~30ms  (React)
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    TOTAL END-TO-END LATENCY:                  ~110ms  âœ… Sub-second!

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

OPTIONAL: Advanced Features

    1. Get Statistics:
       stats = uploader.get_stats()
       print(stats['success_rate'])  # '100.0%'

    2. Print Statistics:
       uploader.print_stats()

    3. Change GPS During Run:
       uploader.gps_lat = 28.625
       uploader.gps_lon = 77.215

    4. Monitor Bandwidth:
       Frame size â‰ˆ 100KB per frame at quality=80
       With send_interval=2: â‰ˆ 300KB/s at 30fps

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

FILES YOU'LL USE:

    REQUIRED:
    â”œâ”€ backend/rail_rakshak_uploader.py ......... Copy this to Jetson
    â””â”€ Your modified c.py ...................... Edit in 3 lines

    REFERENCE:
    â”œâ”€ JETSON_QUICK_START.md ................... 5-min overview
    â”œâ”€ JETSON_C_INTEGRATION.md ................. Detailed guide
    â”œâ”€ EXAMPLE_c_with_uploader.py ............. Full example
    â””â”€ QUICK_REFERENCE.md ..................... Cheat sheet

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

READY? START HERE:

    1. Read: JETSON_QUICK_START.md (5 minutes)
    2. Copy: rail_rakshak_uploader.py to your Jetson
    3. Edit: c.py (add 3 lines)
    4. Run: python c.py
    5. Watch: http://localhost:5173

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
